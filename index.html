<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tipping</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        function TippingApp() {
            const [selectedDay, setSelectedDay] = useState('midtuke');
            const [matches, setMatches] = useState([]);
            const [selections, setSelections] = useState({});

            // Oppsett av testdata
            const days = {
                midtuke: "https://www.norsk-tipping.no/sport/tipping/spill?day=3",
                lordag: "https://www.norsk-tipping.no/sport/tipping/spill?day=1",
                sondag: "https://www.norsk-tipping.no/sport/tipping/spill?day=2"
            };

            // Initier 12 tomme kamper
            useEffect(() => {
                const newMatches = Array(12).fill(null).map((_, index) => ({
                    id: index + 1,
                    homeTeam: '',
                    awayTeam: ''
                }));
                setMatches(newMatches);
            }, [selectedDay]);

            // Håndter valg av H/U/B
            const handleSelection = (matchId, type) => {
                setSelections(prev => {
                    const current = prev[matchId] || {};
                    const updated = {
                        ...prev,
                        [matchId]: {
                            H: type === 'H' ? !current.H : false,
                            U: type === 'U' ? !current.U : false,
                            B: type === 'B' ? !current.B : false,
                        }
                    };
                    return updated;
                });
            };

            return (
                <div className="container mx-auto p-4">
                    <div className="bg-white shadow-lg rounded-lg p-6">
                        <div className="mb-6">
                            <h1 className="text-2xl font-bold mb-4">Tippekupongen</h1>
                            <select 
                                value={selectedDay}
                                onChange={(e) => setSelectedDay(e.target.value)}
                                className="w-full max-w-xs p-2 border rounded shadow-sm"
                            >
                                <option value="midtuke">Midtuke</option>
                                <option value="lordag">Lørdag</option>
                                <option value="sondag">Søndag</option>
                            </select>
                            <div className="mt-2">
                                <a 
                                    href={days[selectedDay]} 
                                    target="_blank" 
                                    className="text-blue-600 hover:text-blue-800"
                                >
                                    Åpne kampene på norsk-tipping.no
                                </a>
                            </div>
                        </div>

                        <div className="overflow-x-auto">
                            <table className="w-full border-collapse">
                                <thead>
                                    <tr className="bg-gray-100">
                                        <th className="p-2 border text-left">Kamp</th>
                                        <th className="p-2 border text-left">Hjemmelag</th>
                                        <th className="p-2 border text-left">Bortelag</th>
                                        <th className="p-2 border text-center w-12">H</th>
                                        <th className="p-2 border text-center w-12">U</th>
                                        <th className="p-2 border text-center w-12">B</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {matches.map((match) => {
                                        const selection = selections[match.id] || {};
                                        return (
                                            <tr key={match.id} className="hover:bg-gray-50">
                                                <td className="p-2 border">{match.id}</td>
                                                <td className="p-2 border">
                                                    <input 
                                                        type="text" 
                                                        className="w-full p-1 border rounded"
                                                        value={match.homeTeam}
                                                        onChange={(e) => {
                                                            const newMatches = [...matches];
                                                            newMatches[match.id - 1].homeTeam = e.target.value;
                                                            setMatches(newMatches);
                                                        }}
                                                    />
                                                </td>
                                                <td className="p-2 border">
                                                    <input 
                                                        type="text" 
                                                        className="w-full p-1 border rounded"
                                                        value={match.awayTeam}
                                                        onChange={(e) => {
                                                            const newMatches = [...matches];
                                                            newMatches[match.id - 1].awayTeam = e.target.value;
                                                            setMatches(newMatches);
                                                        }}
                                                    />
                                                </td>
                                                <td className="p-2 border text-center">
                                                    <input 
                                                        type="checkbox" 
                                                        checked={selection.H || false}
                                                        onChange={() => handleSelection(match.id, 'H')}
                                                        className="h-4 w-4"
                                                    />
                                                </td>
                                                <td className="p-2 border text-center">
                                                    <input 
                                                        type="checkbox" 
                                                        checked={selection.U || false}
                                                        onChange={() => handleSelection(match.id, 'U')}
                                                        className="h-4 w-4"
                                                    />
                                                </td>
                                                <td className="p-2 border text-center">
                                                    <input 
                                                        type="checkbox" 
                                                        checked={selection.B || false}
                                                        onChange={() => handleSelection(match.id, 'B')}
                                                        className="h-4 w-4"
                                                    />
                                                </td>
                                            </tr>
                                        );
                                    })}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<TippingApp />, document.getElementById('root'));
    </script>
</body>
</html>
